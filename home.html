<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Drive With Us">
    <meta name="theme-color" content="#EF4444">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸš—</text></svg>">
    <link rel="manifest" href="data:application/json,{'name':'Drive With Us','short_name':'Drive With Us','start_url':'/','display':'standalone','theme_color':'#EF4444','background_color':'#ffffff'}.webmanifest">
    <title>Drive With Us - Driving Lessons in South Australia</title>
    <meta name="description" content="Book driving lessons with Drive With Us, the #1 choice for learner drivers in Adelaide and South Australia. Safe, professional, and affordable driving instructors.">
    <meta name="keywords" content="driving lessons, driving school, South Australia, Adelaide, learn to drive, driving instructor">
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Calendar Appointment Scheduling begin -->
    <link href="https://calendar.google.com/calendar/scheduling-button-script.css" rel="stylesheet">
    <script src="https://calendar.google.com/calendar/scheduling-button-script.js" async></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }
        .font-script {
            font-family: 'Dancing Script', cursive;
        }
        /* Custom transition for mega menu */
        .mega-menu {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
            pointer-events: none;
            z-index: 1000;
            transition-delay: 0s;
        }
        .has-mega-menu:hover .mega-menu {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            transition-delay: 0s;
        }
        .mega-menu:hover {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            transition-delay: 0s;
        }
        .mega-menu-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .gradient-text-drive {
            background: linear-gradient(135deg, #EF4444, #F97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .gradient-text-lessons {
            background: linear-gradient(135deg, #F97316, #EF4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .gradient-line {
            background: linear-gradient(90deg, #EF4444, #F97316, #EF4444);
            height: 3px;
            width: 100%;
        }
        .page-section {
            display: none;
        }
        .page-section.active {
            display: block;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .accordion-content.open {
            max-height: 1000px; /* A sufficiently large value */
        }
        .form-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px #f97316; /* Orange-500 */
            border-color: #f97316;
        }
        
        /* Mobile Web App Optimizations */
        @media screen and (max-width: 768px) {
            body {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                -webkit-tap-highlight-color: transparent;
                scroll-behavior: smooth;
                overscroll-behavior: none;
            }
            
            /* Prevent zoom on input focus */
            input[type="text"], input[type="email"], textarea, select {
                font-size: 16px !important;
                transform: translateZ(0);
                -webkit-appearance: none;
                appearance: none;
                border-radius: 8px;
            }
            
            /* Optimize touch targets */
            button, a, input[type="button"], input[type="submit"] {
                min-height: 44px;
                min-width: 44px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Smooth scrolling for mobile */
            html {
                scroll-behavior: smooth;
                scroll-behavior: smooth;
            }
            
            /* Prevent horizontal scroll */
            body {
                overflow-x: hidden;
                position: relative;
                width: 100%;
            }
            
            /* Optimize images for mobile */
            img {
                max-width: 100%;
                height: auto;
                display: block;
                -webkit-user-drag: none;
                -khtml-user-drag: none;
                -moz-user-drag: none;
                -o-user-drag: none;
            }
            
            /* Mobile-specific button styles */
            .mobile-optimized-btn {
                padding: 12px 24px;
                font-size: 16px;
                border-radius: 8px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Optimize hero sections for mobile */
            .hero-section {
                min-height: 100vh;
                min-height: -webkit-fill-available;
                min-height: 100dvh; /* Dynamic viewport height for mobile */
            }
            
            /* Mobile navigation improvements */
            .mobile-menu {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 1000;
                background: white;
                overflow-y: auto;
                scroll-behavior: smooth;
            }
            
            /* Mobile header optimizations */
            .mobile-header {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                z-index: 999;
                background: white;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            
            /* Mobile content spacing */
            .mobile-content {
                padding-top: 80px;
            }
            
            /* Mobile form optimizations */
            .mobile-form input, .mobile-form textarea, .mobile-form select {
                font-size: 16px;
                padding: 12px 16px;
                border-radius: 8px;
                border: 1px solid #d1d5db;
                width: 100%;
                box-sizing: border-box;
            }
            
            /* Mobile card optimizations */
            .mobile-card {
                border-radius: 12px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                margin: 16px;
                overflow: hidden;
            }
            
            /* Mobile text optimizations */
            .mobile-text {
                line-height: 1.6;
                font-size: 16px;
            }
            
            /* Mobile button optimizations */
            .mobile-btn {
                padding: 16px 24px;
                font-size: 16px;
                font-weight: 600;
                border-radius: 12px;
                border: none;
                cursor: pointer;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
                transition: all 0.2s ease;
            }
            
            .mobile-btn:active {
                transform: scale(0.98);
            }
            
            /* Mobile grid optimizations */
            .mobile-grid {
                display: grid;
                grid-template-columns: 1fr;
                gap: 16px;
                padding: 16px;
            }
            
            /* Mobile spacing utilities */
            .mobile-p-4 { padding: 16px; }
            .mobile-p-6 { padding: 24px; }
            .mobile-m-4 { margin: 16px; }
            .mobile-m-6 { margin: 24px; }
            
            /* Mobile typography */
            .mobile-h1 { font-size: 2rem; font-weight: 700; line-height: 1.2; }
            .mobile-h2 { font-size: 1.75rem; font-weight: 600; line-height: 1.3; }
            .mobile-h3 { font-size: 1.5rem; font-weight: 600; line-height: 1.4; }
            .mobile-h4 { font-size: 1.25rem; font-weight: 600; line-height: 1.4; }
            
            /* Mobile safe areas */
            .mobile-safe-top { padding-top: env(safe-area-inset-top); }
            .mobile-safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
            .mobile-safe-left { padding-left: env(safe-area-inset-left); }
            .mobile-safe-right { padding-right: env(safe-area-inset-right); }
        }
        
        /* iOS Safari specific fixes */
        @supports (-webkit-touch-callout: none) {
            .hero-section {
                min-height: -webkit-fill-available;
            }
            
            /* iOS specific optimizations */
            body {
                -webkit-text-size-adjust: 100%;
                text-size-adjust: 100%;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            
            /* iOS input optimizations */
            input, textarea, select {
                -webkit-appearance: none;
                appearance: none;
                border-radius: 8px;
            }
            
            /* iOS button optimizations */
            button {
                -webkit-appearance: none;
                appearance: none;
                border-radius: 8px;
            }
        }
        
        /* Additional mobile optimizations */
        @media screen and (max-width: 480px) {
            /* Extra small mobile devices */
            .mobile-xs-text { font-size: 14px; }
            .mobile-xs-padding { padding: 12px; }
            .mobile-xs-margin { margin: 12px; }
            
            /* Ultra-compact navigation */
            .mobile-xs-nav {
                padding: 8px 12px;
                font-size: 14px;
            }
            
            /* Compact buttons for small screens */
            .mobile-xs-btn {
                padding: 12px 16px;
                font-size: 14px;
                min-height: 40px;
            }
        }
        
        /* Landscape mobile optimizations */
        @media screen and (max-height: 500px) and (orientation: landscape) {
            .mobile-landscape {
                min-height: 100vh;
                min-height: 100dvh;
            }
            
            .mobile-landscape-nav {
                height: 60px;
            }
            
            .mobile-landscape-content {
                padding-top: 60px;
            }
        }
    </style>
</head>
<body>
    <template id="header-template">
        <div id="custom-header-container">
        <header class="bg-white relative">
            <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                        <div class="flex-shrink-0">
                            <a href="#" class="nav-link text-2xl font-bold text-gray-800 hover:text-red-600 transition" data-page="home">Drive With Us</a>
                        </div>
                    <div class="hidden md:flex items-center space-x-8">
                        <div class="has-mega-menu static">
                            <a href="#" class="text-gray-700 hover:text-red-600 font-semibold transition">Let's Drive <i class="fas fa-angle-down text-xs"></i></a>
                            <div class="mega-menu absolute left-0 top-full w-full -mt-1 shadow-2xl bg-white ring-1 ring-gray-200 rounded-lg">
                                <div class="w-full bg-white rounded-lg">
                                    <div class="max-w-7xl mx-auto px-6 sm:px-8 lg:px-12">
                                        <div class="py-10">
                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                                                <div class="text-center">
                                                    <a href="#" class="nav-link mega-menu-link block text-lg font-semibold text-gray-800 hover:text-red-600 px-6 py-4 rounded-lg transition-all duration-300" data-page="driving-lessons">
                                                        <div class="mb-2">
                                                            <i class="fas fa-car text-3xl text-red-500 mb-3"></i>
                                                        </div>
                                                        <div class="font-bold text-xl">Driving Lessons</div>
                                                        <div class="text-sm text-gray-600 mt-1">Professional instruction for all skill levels</div>
                                                    </a>
                                                </div>
                                                <div class="text-center">
                                                    <a href="#" class="nav-link mega-menu-link block text-lg font-semibold text-gray-800 hover:text-red-600 px-6 py-4 rounded-lg transition-all duration-300" data-page="first-driving-lesson">
                                                        <div class="mb-2">
                                                            <i class="fas fa-graduation-cap text-3xl text-red-500 mb-3"></i>
                                                        </div>
                                                        <div class="font-bold text-xl">First Driving Lesson</div>
                                                        <div class="text-sm text-gray-600 mt-1">Perfect introduction to driving</div>
                                                    </a>
                                                </div>
                                                <div class="text-center">
                                                    <a href="#" class="nav-link mega-menu-link block text-lg font-semibold text-gray-800 hover:text-red-600 px-6 py-4 rounded-lg transition-all duration-300" data-page="automatic-manual-lessons">
                                                        <div class="mb-2">
                                                            <i class="fas fa-cogs text-3xl text-red-500 mb-3"></i>
                                                        </div>
                                                        <div class="font-bold text-xl">Manual & Automatic</div>
                                                        <div class="text-sm text-gray-600 mt-1">Learn both transmission types</div>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <a href="#" class="nav-link text-gray-700 hover:text-red-600 font-semibold transition" data-page="safer-drivers-course">Safer Drivers Course</a>
                    <a href="#" class="nav-link text-gray-700 hover:text-red-600 font-semibold transition" data-page="about">About</a>
                    <a href="#" class="nav-link text-gray-700 hover:text-red-600 font-semibold transition" data-page="contact">Contact</a>
                    </div>
                    <div class="flex items-center">
                        <a href="#" class="hidden md:inline-block bg-red-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-red-600 transition" id="book-lesson-header">Book Lesson</a>
                        <div class="md:hidden ml-4">
                            <button id="mobile-menu-button" class="p-2 text-gray-600 hover:text-gray-900 focus:outline-none"><span class="sr-only">Open menu</span><i id="menu-icon" class="fas fa-bars fa-lg"></i></button>
                        </div>
                    </div>
                </div>
            </nav>
            <div id="mobile-menu" class="md:hidden hidden bg-white border-t">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <div>
                        <button class="accordion-toggle w-full text-left font-semibold text-gray-700 p-3 rounded-md hover:bg-gray-50 flex justify-between items-center"><span>Let's Drive</span><i class="fas fa-chevron-down text-sm"></i></button>
                        <div class="accordion-content hidden pl-4 pt-2 pb-2 text-gray-600 space-y-2">
                            <a href="#" class="nav-link block pl-2 py-2 text-base hover:text-red-600 hover:bg-gray-50 rounded-md transition-all duration-200" data-page="driving-lessons">Driving Lessons</a>
                            <a href="#" class="nav-link block pl-2 py-2 text-base hover:text-red-600 hover:bg-gray-50 rounded-md transition-all duration-200" data-page="first-driving-lesson">First Driving Lesson</a>
                            <a href="#" class="nav-link block pl-2 py-2 text-base hover:text-red-600 hover:bg-gray-50 rounded-md transition-all duration-200" data-page="automatic-manual-lessons">Manual & Automatic Lessons</a>
                        </div>
                    </div>
                    <a href="#" class="nav-link block p-3 rounded-md font-semibold text-gray-700 hover:text-red-600 hover:bg-gray-50 transition-all duration-200" data-page="safer-drivers-course">Safer Drivers Course</a>
                    <a href="#" class="nav-link block p-3 rounded-md font-semibold text-gray-700 hover:text-red-600 hover:bg-gray-50 transition-all duration-200" data-page="about">About</a>
                    <a href="#" class="nav-link block p-3 rounded-md font-semibold text-gray-700 hover:text-red-600 hover:bg-gray-50 transition-all duration-200" data-page="contact">Contact</a>
                </div>
                <div class="p-4 border-t"><a href="#" class="block w-full text-center bg-red-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-red-600 transition" id="book-lesson-mobile">Book Lesson</a></div>
            </div>
        </header>
    </div>
</template>

<div id="header-spacer"></div>

<!-- PAGE CONTENT WILL BE LOADED HERE -->
<div id="page-content"></div>

<footer class="bg-[#13151A] text-gray-300 pt-16 sm:pt-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
            <div class="lg:col-span-8 grid grid-cols-2 md:grid-cols-5 gap-8">
                <div class="col-span-2 md:col-span-1">
                    <h3 class="text-white text-2xl font-extrabold tracking-wider">DRIVE WITH US</h3>
                    <div class="flex items-center mt-4">
                        <div class="flex text-yellow-400">
                           <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                           <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                           <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                           <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                           <svg class="w-5 h-5 text-gray-600" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                        </div>
                    </div>
                    <p class="mt-2 text-sm">Rated 4.8/5 stars</p>
                    <p class="text-xs text-gray-400">based on 1000+ Google Reviews</p>
                    <a href="#" class="text-sm text-red-500 underline mt-2 block">Review us</a>
                </div>
                <div class="space-y-4">
                    <h4 class="font-bold text-white">Let's Drive</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="nav-link hover:text-white" data-page="driving-lessons">Driving Lessons</a></li>
                        <li><a href="#" class="nav-link hover:text-white" data-page="first-driving-lesson">First Driving Lesson</a></li>
                        <li><a href="#" class="nav-link hover:text-white" data-page="automatic-manual-lessons">Manual & Automatic Lessons</a></li>
                    </ul>
                </div>
                <div class="space-y-4">
                    <h4 class="font-bold text-white">Courses</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="nav-link hover:text-white" data-page="safer-drivers-course">Safer Drivers Course</a></li>
                    </ul>
                </div>
                <div class="space-y-4">
                    <h4 class="font-bold text-white">About</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="nav-link hover:text-white" data-page="about">About Drive With Us</a></li>
                        <li><a href="#" class="nav-link hover:text-white" data-page="home">Our Method</a></li>
                        <li><a href="#" class="nav-link hover:text-white" data-page="home">Testimonials</a></li>
                        <li><a href="#" class="nav-link hover:text-white" data-page="contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="lg:col-span-4">
                <h3 class="text-xl font-bold text-white">SUBSCRIBE <span class="font-script text-3xl">Today</span></h3>
                <form class="mt-4 space-y-4">
                    <input type="text" placeholder="First Name" class="w-full bg-gray-800 border-gray-700 rounded-md py-2 px-4 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500">
                    <input type="text" placeholder="Last Name" class="w-full bg-gray-800 border-gray-700 rounded-md py-2 px-4 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500">
                    <input type="email" placeholder="Email Address" class="w-full bg-gray-800 border-gray-700 rounded-md py-2 px-4 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500">
                    <button type="submit" class="w-full bg-white text-gray-900 font-bold py-3 px-4 rounded-md hover:bg-gray-200 transition">Subscribe</button>
                </form>
            </div>
        </div>
        <div class="mt-12 pt-8 border-t border-gray-800">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <p class="text-sm text-gray-400">&copy; 2024 Drive With Us. All rights reserved.</p>
                <div class="mt-4 md:mt-0 flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-white transition">Privacy Policy</a>
                    <a href="#" class="text-gray-400 hover:text-white transition">Terms of Service</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- HEADER SCRIPT ---
        const headerTemplate = document.getElementById('header-template');
        if (headerTemplate) {
            const headerContent = headerTemplate.content.cloneNode(true);
            document.body.prepend(headerContent);
        }

        function setSpacerHeight() {
            const headerContainer = document.getElementById('custom-header-container');
            const spacer = document.getElementById('header-spacer');
            if (headerContainer && spacer) {
                spacer.style.height = headerContainer.offsetHeight + 'px';
            }
        }
        
        function expandIframeContainer() {
            try {
                let parent = window.frameElement;
                for (let i = 0; i < 5 && parent; i++) {
                    parent.style.width = '100%';
                    parent.style.paddingLeft = '0';
                    parent.style.paddingRight = '0';
                    parent = parent.parentElement;
                }
            } catch (e) {
                console.warn("Could not expand iframe container.", e);
            }
        }

        setTimeout(() => { setSpacerHeight(); expandIframeContainer(); }, 150);
        window.addEventListener('resize', () => { setSpacerHeight(); expandIframeContainer(); });

        // --- MOBILE MENU SCRIPT ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuIcon = document.getElementById('menu-icon');
        if(mobileMenuButton) {
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                menuIcon.classList.toggle('fa-bars');
                menuIcon.classList.toggle('fa-times');
            });
        }
        const accordionToggles = document.querySelectorAll('.accordion-toggle');
        accordionToggles.forEach(button => {
            button.addEventListener('click', () => {
                const content = button.nextElementSibling;
                const icon = button.querySelector('i');
                content.classList.toggle('hidden');
                icon.classList.toggle('fa-chevron-down');
                icon.classList.toggle('fa-chevron-up');
            });
        });

        // --- MEGA MENU TIMING SCRIPT ---
        let megaMenuTimeout;
        const megaMenu = document.querySelector('.mega-menu');
        const megaMenuTrigger = document.querySelector('.has-mega-menu');

        if (megaMenu && megaMenuTrigger) {
            megaMenuTrigger.addEventListener('mouseenter', () => {
                clearTimeout(megaMenuTimeout);
                megaMenu.classList.remove('hidden');
            });

            megaMenuTrigger.addEventListener('mouseleave', () => {
                megaMenuTimeout = setTimeout(() => {
                    megaMenu.classList.add('hidden');
                }, 250);
            });

            megaMenu.addEventListener('mouseenter', () => {
                clearTimeout(megaMenuTimeout);
                megaMenu.classList.remove('hidden');
            });

            megaMenu.addEventListener('mouseleave', () => {
                megaMenuTimeout = setTimeout(() => {
                    megaMenu.classList.add('hidden');
                }, 250);
            });
        }

        // --- PAGE NAVIGATION SCRIPT ---
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetPage = link.getAttribute('data-page');
                if (targetPage) {
                    showPage(targetPage);
                }
            });
        });

        function showPage(pageId) {
            // Load the page content dynamically
            loadPageContent(pageId);
            
            // Scroll to top of the page
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function loadPageContent(pageId) {
            const pageContent = document.getElementById('page-content');
            const pageFiles = {
                'home': 'home-page.html',
                'driving-lessons': 'driving-lessons-page.html',
                'first-driving-lesson': 'first-driving-lesson-page.html',
                'automatic-manual-lessons': 'automatic-manual-lessons-page.html',
                'safer-drivers-course': 'safer-drivers-course-page.html',
                'about': 'about-page.html',
                'contact': 'contact-page.html'
            };

            const pageFile = pageFiles[pageId];
            if (pageFile) {
                fetch(pageFile)
                    .then(response => response.text())
                    .then(html => {
                        pageContent.innerHTML = html;
                        // Re-initialize any page-specific scripts
                        initializePageScripts();
                    })
                    .catch(error => {
                        console.error('Error loading page:', error);
                        pageContent.innerHTML = '<div class="p-8 text-center"><h2 class="text-2xl font-bold text-gray-800">Page not found</h2><p class="text-gray-600 mt-4">The requested page could not be loaded.</p></div>';
                    });
            }
        }

        function initializePageScripts() {
            // Re-initialize accordion functionality
            const accordionItems = document.querySelectorAll('.accordion-item');
            accordionItems.forEach(item => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                const icon = item.querySelector('.accordion-icon i');

                if (header && content && icon) {
                    header.addEventListener('click', () => {
                        const isExpanded = content.classList.contains('open');
                        accordionItems.forEach(otherItem => {
                            if (otherItem !== item) {
                                const otherContent = otherItem.querySelector('.accordion-content');
                                const otherIcon = otherItem.querySelector('.accordion-icon i');
                                if (otherContent && otherIcon) {
                                    otherContent.classList.remove('open');
                                    otherIcon.classList.remove('fa-minus');
                                    otherIcon.classList.add('fa-plus');
                                }
                            }
                        });
                        if (isExpanded) {
                            content.classList.remove('open');
                            icon.classList.remove('fa-minus');
                            icon.classList.add('fa-plus');
                        } else {
                            content.classList.add('open');
                            icon.classList.add('fa-minus');
                            icon.classList.remove('fa-plus');
                        }
                    });
                }
            });

            // Re-initialize testimonial sliders
            initializeTestimonialSliders();
        }

        function initializeTestimonialSliders() {
            // Initialize all testimonial sliders
            const sliderConfigs = [
                { trackId: 'slider-track', dotsId: 'slider-dots', color: 'red' },
                { trackId: 'slider-track-v2', dotsId: 'slider-dots-v2', color: 'yellow' },
                { trackId: 'slider-track-v3', dotsId: 'slider-dots-v3', color: 'yellow' },
                { trackId: 'slider-track-v5', dotsId: 'slider-dots-v5', color: 'red' },
                { trackId: 'slider-track-v7', dotsId: 'slider-dots-v7', color: 'red' }
            ];

            sliderConfigs.forEach(config => {
                const track = document.getElementById(config.trackId);
                const dotsContainer = document.getElementById(config.dotsId);
                
                if (track && dotsContainer) {
                    const slides = Array.from(track.children);
                    let currentIndex = 0;

                    if (slides.length > 0) {
                        // Clear existing dots
                        dotsContainer.innerHTML = '';

                        // Initialize slides
                        slides.forEach((slide, index) => {
                            slide.style.transition = 'opacity 0.5s ease-in-out';
                            slide.style.width = '100%';
                            if (index === 0) {
                                slide.style.opacity = '1';
                                slide.style.position = 'relative';
                            } else {
                                slide.style.opacity = '0';
                                slide.style.position = 'absolute';
                                slide.style.top = '0';
                                slide.style.left = '0';
                            }

                            // Create dots
                            const dot = document.createElement('button');
                            dot.setAttribute('aria-label', `Go to slide ${index + 1}`);
                            dot.classList.add('w-3', 'h-3', 'rounded-full', 'transition-colors', 'duration-300');
                            dot.classList.add(index === 0 ? `bg-${config.color}-500` : 'bg-gray-300', `hover:bg-${config.color}-400`);
                            dot.addEventListener('click', () => goToSlide(index));
                            dotsContainer.appendChild(dot);
                        });

                        const dots = Array.from(dotsContainer.children);

                        function goToSlide(index) {
                            if (index === currentIndex) return;
                            slides[currentIndex].style.opacity = '0';
                            slides[currentIndex].style.position = 'absolute';
                            slides[currentIndex].style.top = '0';
                            slides[currentIndex].style.left = '0';
                            dots[currentIndex].classList.replace(`bg-${config.color}-500`, 'bg-gray-300');
                            slides[index].style.opacity = '1';
                            slides[index].style.position = 'relative';
                            dots[index].classList.replace('bg-gray-300', `bg-${config.color}-500`);
                            currentIndex = index;
                        }

                        // Auto-advance slides
                        setInterval(() => {
                            goToSlide((currentIndex + 1) % slides.length);
                        }, 5000);
                    }
                }
            });
        }

        // --- GOOGLE CALENDAR APPOINTMENT SCHEDULING ---
        window.addEventListener('load', function() {
            const bookLessonButtons = [
                'book-lesson-header',
                'book-lesson-mobile', 
                'book-lesson-1',
                'book-lesson-2',
                'book-lesson-3',
                'book-lesson-4',
                'book-lesson-5',
                'book-lesson-6',
                'book-safer-course-1',
                'book-safer-course-2',
                'book-driving-lesson'
            ];
            
            // Load calendar scheduling for each button
            bookLessonButtons.forEach(buttonId => {
                const button = document.getElementById(buttonId);
                if (button) {
                    // Add click event to open calendar
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        // Open the calendar URL in a new window
                        window.open('https://calendar.google.com/calendar/appointments/schedules/AcZssZ1bHXiZ58CVZQ7OYR8bTTx_ETot75a9ADCB-0mX5ut3LOrwhNqFsc9kUlsboJFLE-TasfqIXUoQ?gv=true', '_blank');
                    });
                }
            });

            // --- LOCATION SEARCH FORMS ---
            const searchButtons = [
                { buttonId: 'search-times-btn', suburbId: 'suburb' },
                { buttonId: 'search-times-btn-1', suburbId: 'suburb-1' },
                { buttonId: 'search-times-btn-2', suburbId: 'suburb-2' },
                { buttonId: 'search-times-btn-3', suburbId: 'suburb-3' }
            ];
            
            searchButtons.forEach(({ buttonId, suburbId }) => {
                const searchBtn = document.getElementById(buttonId);
                if (searchBtn) {
                    searchBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        const suburbInput = document.getElementById(suburbId);
                        const suburb = suburbInput ? suburbInput.value.trim() : '';
                        
                        // Open Google Calendar with location context
                        const calendarUrl = 'https://calendar.google.com/calendar/appointments/schedules/AcZssZ1bHXiZ58CVZQ7OYR8bTTx_ETot75a9ADCB-0mX5ut3LOrwhNqFsc9kUlsboJFLE-TasfqIXUoQ?gv=true';
                        window.open(calendarUrl, '_blank');
                    });
                }
            });
        });

        // Load the home page by default
        loadPageContent('home');
        
        // --- MOBILE WEB APP OPTIMIZATIONS ---
        // Prevent default touch behaviors that interfere with scrolling
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Prevent double-tap zoom
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // Optimize scroll performance
        let ticking = false;
        function updateScroll() {
            // Add any scroll-based animations here
            ticking = false;
        }
        
        function requestTick() {
            if (!ticking) {
                requestAnimationFrame(updateScroll);
                ticking = true;
            }
        }
        
        window.addEventListener('scroll', requestTick, { passive: true });
        
        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
            setTimeout(() => {
                setSpacerHeight();
                expandIframeContainer();
                // Recalculate viewport height after orientation change
                handleViewportChange();
            }, 100);
        });
        
        // Optimize for mobile viewport changes
        let viewportHeight = window.innerHeight;
        function handleViewportChange() {
            const newHeight = window.innerHeight;
            if (Math.abs(newHeight - viewportHeight) > 50) {
                viewportHeight = newHeight;
                setSpacerHeight();
                // Update CSS custom properties for viewport height
                document.documentElement.style.setProperty('--vh', `${newHeight * 0.01}px`);
            }
        }
        
        window.addEventListener('resize', handleViewportChange);
        
        // Add mobile-specific touch feedback
        const touchElements = document.querySelectorAll('button, a, input[type="button"], input[type="submit"]');
        touchElements.forEach(element => {
            element.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.95)';
                this.style.transition = 'transform 0.1s ease';
            });
            
            element.addEventListener('touchend', function() {
                this.style.transform = 'scale(1)';
            });
            
            element.addEventListener('touchcancel', function() {
                this.style.transform = 'scale(1)';
            });
        });
        
        // Mobile-specific optimizations
        function optimizeForMobile() {
            // Add mobile classes to body
            if (window.innerWidth <= 768) {
                document.body.classList.add('mobile-optimized');
            } else {
                document.body.classList.remove('mobile-optimized');
            }
            
            // Optimize images for mobile
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.style.maxWidth = '100%';
                img.style.height = 'auto';
                img.loading = 'lazy';
            });
            
            // Add mobile-safe-area classes
            const header = document.querySelector('header');
            if (header) {
                header.classList.add('mobile-safe-top');
            }
            
            const footer = document.querySelector('footer');
            if (footer) {
                footer.classList.add('mobile-safe-bottom');
            }
        }
        
        // Initialize mobile optimizations
        optimizeForMobile();
        window.addEventListener('resize', optimizeForMobile);
        
        // Mobile gesture handling
        let startY = 0;
        let startX = 0;
        
        document.addEventListener('touchstart', function(e) {
            startY = e.touches[0].clientY;
            startX = e.touches[0].clientX;
        }, { passive: true });
        
        document.addEventListener('touchmove', function(e) {
            const currentY = e.touches[0].clientY;
            const currentX = e.touches[0].clientX;
            const diffY = startY - currentY;
            const diffX = startX - currentX;
            
            // Prevent horizontal scrolling on vertical swipes
            if (Math.abs(diffY) > Math.abs(diffX)) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Mobile performance optimizations
        if ('requestIdleCallback' in window) {
            requestIdleCallback(() => {
                // Preload critical resources
                const criticalImages = document.querySelectorAll('img[data-critical]');
                criticalImages.forEach(img => {
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                    }
                });
            });
        }
        
        // Mobile keyboard handling
        const inputs = document.querySelectorAll('input, textarea');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                // Scroll input into view on mobile
                setTimeout(() => {
                    this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 300);
            });
        });
        
        // Mobile menu optimizations
        const mobileMenuButton2 = document.getElementById('mobile-menu-button');
        const mobileMenu2 = document.getElementById('mobile-menu');
        
        if (mobileMenuButton2 && mobileMenu2) {
            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!mobileMenu2.contains(e.target) && !mobileMenuButton2.contains(e.target)) {
                    mobileMenu2.classList.add('hidden');
                    const menuIcon = document.getElementById('menu-icon');
                    if (menuIcon) {
                        menuIcon.classList.remove('fa-times');
                        menuIcon.classList.add('fa-bars');
                    }
                }
            });
            
            // Prevent body scroll when mobile menu is open
            mobileMenuButton2.addEventListener('click', function() {
                if (mobileMenu2.classList.contains('hidden')) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                }
            });
        }
    });
</script>
</body>
</html>